<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="ISO-8859-1">
    <title>Admin Screen</title>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

</head>
<style>
    @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');
    body {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
    }

    /* Navbar */
    .navbar {
        background-color: #fff; /* Changed background color to white */
        color: #000; /* Changed text color to black */
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Added shadow effect */
    }

    .navbar h1 {
        margin: 0;
    }

    .nav-links {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
    }

    .nav-links li {
        margin-right: 30px;
    }

    .nav-links a {
        text-decoration: none;
        color: #000; /* Changed text color to black */
        position: relative;
    }

    .nav-links a::after {
        content: "";
        display: block;
        width: 0;
        height: 3px;
        background-color: crimson; /* Changed line color to black */
        position: absolute;
        bottom: -5px;
        left: 0;
        transition: width 0.3s ease-in-out;
    }

    .nav-links a:hover::after {
        width: 100%;
        left: 0;
    }
    .table {
        max-width: 90%;
        margin: 30px 70px;

    }


    .table table {
        width: 100%;
        border-collapse: collapse;
    }

    .table th,
    .table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    .table th {
        background-color: crimson;
        color: white;
    }

    .btn{
        background-color: crimson;
        color: white;
    }

</style>

<body>

<nav class="navbar">
    <h1>Indore Metro</h1>

    <ul class="nav-links">
        <li><a href="" th:href="@{/}">Home</a></li>
        <li><a href="" th:href="@{/feedback}">FeedBack</a></li>
        <li><a href="" sec:authorize="isAuthenticated()" th:href="@{/logout}">Logout</a></li>
        <li>
            <a href="" sec:authorize="isAnonymous()" th:href="@{/loginRegister}">Login</a>
            <span sec:authorize="isAnonymous()"> / </span>
            <a href="" sec:authorize="isAnonymous()" th:href="@{/loginRegister}">Register</a>
        </li>
    </ul>
</nav>

<div class="container">
    <div th:if="${param.success}">
        <div class="alert alert-info">Ticket Sent to your Email Id Successfully.</div>
    </div>
    <div th:if="${param.successCancel}">
        <div class="alert alert-info">Your Trip is Cancelled Successfully.You Will receive mail when refund is initiated.</div>
    </div>
    <div th:if="${param.alreadyCancel}">
        <div class="alert alert-info" style="color: red;">Your This Trip is already Cancelled.You Will receive mail when refund is initiated.</div>
    </div>

    <div class="row">

        <form th:action="@{/myBooking}" method="get" th:object="${bookings}">

            <table border="1" class = "table table-striped table-responsive-md">
                <thead>
                <tr>
                    <th>From</th>
                    <th>To</th>
                    <th>Departure Time</th>
                    <th>Metro Name</th>
                    <th>No of Passengers</th>
                    <th>Total Amount Paid</th>
                    <th>Trip Status</th>
                    <th>Cancel Booking</th>
                    <th>Generate Ticket(Will be sent on Email)</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="metro : ${bookings}">

                    <td th:text="${metro.fromDestination}"></td>
                    <td th:text="${metro.toDestination}"></td>
                    <td th:text="${metro.time}"></td>
                    <td th:text="${metro.metroName}"></td>
                    <td th:text="${metro.noOfPersons}"></td>
                    <td th:text="${metro.totalCalculated}"></td>
                    <td th:text="${metro.tripStatus}"></td>
                    <td> <a th:href="@{/myBooking/cancel/{id}(id=${metro.id})}" th:disabled="${metro.tripStatus eq Canceled}" class="btn">Cancel</a>
                    <td> <a th:href="@{/myBooking/generate/{id}(id=${metro.id})}" class="btn ">Generate</a>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>
</body>
</html>